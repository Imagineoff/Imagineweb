<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Silent Studio — Game Studio</title>
  <meta name="description" content="Silent Studio — psycho-horror game studio crafting unsettling experiences." />
  <meta name="theme-color" content="#000000" />
  <link rel="icon" href="https://raw.githubusercontent.com/Imagineoff/Imagineweb/main/IMG_4254.png" />

  <!-- Fonts: Orbitron pro logo, Inter pro tělo -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* =========================
       VARIABLES / SYSTEM COLORS
       ========================= */
    :root{
      --bg: #000000;
      --panel: rgba(255,255,255,0.02);
      --glass: rgba(255,255,255,0.03);
      --muted: #9a9a9a;
      --accent: #7fe7ff;
      --accent-2: #d68bff;
      --white: #ffffff;
      --terminal-bg: #050505;
      --terminal-fore: #8affff;
      --radius: 12px;
      --max-width: 1100px;
    }

    /* =========================
       RESET / BASE
       ========================= */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      background: var(--bg);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      line-height:1.45;
    }

    /* CONTAINER */
    .wrap{
      max-width:var(--max-width);
      margin: 0 auto;
      padding: 36px 20px;
      position:relative;
    }

    /* =========================
       HERO
       ========================= */
    header.hero{
      position:relative;
      height:48vh;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border-radius:16px;
      margin-bottom:24px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 18px 60px rgba(0,0,0,0.7);
    }
    .hero__img{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
      filter:brightness(.56) contrast(1.05);
      transform: scale(1.03);
      transition: transform 8s linear, filter .35s ease;
    }
    .hero__panel{
      position:relative; z-index:3; text-align:center; padding:22px;
      backdrop-filter: blur(6px);
      border-radius:10px;
      background: linear-gradient(180deg, rgba(10,10,10,0.45), rgba(0,0,0,0.25));
      border:1px solid rgba(255,255,255,0.02);
    }
    h1.logo{
      font-family:Orbitron,monospace;
      font-size: clamp(28px, 4.2vw, 48px);
      letter-spacing:3px;
      margin:0;
      display:inline-block;
    }
    p.lead{
      margin:10px 0 0;
      color:#cfcfcf;
      max-width:780px;
    }

    /* subtle CRT scanline for atmosphere */
    .scanline{
      position:absolute; inset:0; pointer-events:none;
      background-image: linear-gradient(transparent 50%, rgba(255,255,255,0.012) 51%);
      background-size: 100% 4px;
      mix-blend-mode: screen;
      z-index:2; opacity:.6;
    }

    /* =========================
       GRID: main content
       ========================= */
    .grid{
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:18px;
      align-items:start;
    }

    /* left column: content cards */
    .col-left{min-width:0}

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006));
      border:1px solid rgba(255,255,255,0.03);
      padding:18px;
      border-radius:var(--radius);
      margin-bottom:16px;
    }
    .card h2{
      margin:0 0 10px; font-family:Orbitron,monospace; letter-spacing:1px; font-size:16px;
    }

    /* widgets inside */
    #widgets{
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      gap:12px;
    }
    .widget{
      padding:12px;
      border-radius:10px;
      background: rgba(255,255,255,0.01);
      border:1px solid rgba(255,255,255,0.02);
      min-height:120px;
    }
    .widget h3{ margin:0 0 6px; font-family:Orbitron,monospace; font-size:13px; }

    /* right column: sticky interactions */
    .col-right{
      position:relative;
    }
    .sticky{
      position:sticky; top:22px;
    }

    /* =========================
       TERMINAL (vylepšený)
       ========================= */
    .terminal-wrap{
      display:flex; flex-direction:column; gap:8px;
    }
    .terminal{
      background:var(--terminal-bg);
      color:var(--terminal-fore);
      padding:12px;
      border-radius:10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      font-size:13px;
      height:260px;
      overflow:auto;
      border:1px solid rgba(0,255,255,0.04);
      box-shadow: inset 0 -8px 40px rgba(0,0,0,0.6);
      position:relative;
    }
    .terminal .line{ white-space:pre-wrap; margin:.25rem 0; }
    .terminal .muted{ color:var(--muted); font-size:12px }
    .terminal .prompt{ color:var(--terminal-fore); }

    .terminal-input{
      display:flex; gap:8px; margin-top:6px;
    }
    .terminal-input input{
      flex:1; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04);
      background:#0a0a0a; color:var(--white); font-family:inherit;
    }
    .controls{ display:flex; gap:8px; justify-content:flex-end; }
    .btn{
      padding:.45rem .8rem; border-radius:8px; background:transparent; color:var(--white);
      border:1px solid rgba(255,255,255,0.06); cursor:pointer; font-family:inherit;
    }
    .btn.ghost{ opacity:.7 }

    /* flashing caret for UX */
    .caret{
      display:inline-block;
      width:8px; height:14px; background:var(--terminal-fore); margin-left:6px;
      vertical-align:middle;
      animation: blink .9s steps(2,start) infinite;
    }
    @keyframes blink{ 50%{ opacity:0 } }

    /* small hint footer */
    .hint{
      text-align:center; color:var(--muted); font-size:13px; margin-top:12px;
    }

    /* footer */
    footer{ text-align:center; color:var(--muted); margin-top:22px; font-size:13px; }

    /* responsive */
    @media (max-width:980px){
      .grid{ grid-template-columns: 1fr; }
      .col-right{ order:-1; }
      header.hero{ height:36vh; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- HERO -->
    <header class="hero" role="banner" aria-label="Silent Studio hero">
      <img class="hero__img" id="heroImg" src="https://raw.githubusercontent.com/Imagineoff/Imagineweb/main/IMG_4251.gif" alt="Silent Studio header">
      <div class="scanline" aria-hidden="true"></div>

      <div class="hero__panel" role="img" aria-label="Silent Studio">
        <h1 class="logo" aria-hidden="false">Silent Studio</h1>
        <p class="lead">Psycho-horror game studio crafting unsettling experiences — silence speaks louder than screams.</p>
      </div>
    </header>

    <!-- MAIN GRID -->
    <div class="grid" role="main">
      <!-- LEFT: Content -->
      <div class="col-left">
        <section class="card" aria-labelledby="about-title">
          <h2 id="about-title">Manifest</h2>
          <p style="color:#d0d0d0">Experimentální landing page kombinuje procedurální audio, canvas vizuály a jemné interakce. Zkus terminál (stiskni <code>`</code>) nebo se přidej do komunity.</p>
        </section>

        <section class="card" aria-labelledby="games-title">
          <h2 id="games-title">Studio</h2>
          <div id="widgets">
            <div class="widget" id="gamesWidget">
              <h3>Games</h3>
              <p id="gamesText">Žádné vydání zatím. Něco se ale hemží v hloubce…</p>
              <small style="color:var(--muted)">Preview</small>
            </div>

            <div class="widget" id="discordWidget">
              <h3>Community</h3>
              <!-- zachován původní embed, ale omezujeme výšku -->
              <iframe title="Discord" src="https://discord.com/widget?id=1433738890421997600&theme=dark"
                style="width:100%;height:180px;border:0;border-radius:6px;background:transparent;" allowtransparency="true"></iframe>
            </div>

            <div class="widget" id="contactWidget">
              <h3>Contact</h3>
              <p style="margin:0">
                <button id="emailCopy" class="btn" style="padding:.25rem .5rem;font-size:13px">assist.silent.studio@gmail.com</button>
              </p>
              <div style="margin-top:8px; font-size:13px">
                <a href="https://x.com/_silent_studio" target="_blank" rel="noopener" style="color:var(--accent)">Follow on X</a> •
                <a href="https://dsc.gg/silent-studio" target="_blank" rel="noopener" style="color:var(--accent)">Join Discord</a>
              </div>
            </div>
          </div>
        </section>

        <section class="card" aria-labelledby="extras-title">
          <h2 id="extras-title">Extras</h2>
          <p class="muted" style="color:var(--muted)">Hover widgets, ambient audio a jemné vizuální rušení — vše navrženo tak, aby neubíralo na použitelnosti.</p>
        </section>
      </div>

      <!-- RIGHT: Terminal + Support (sticky) -->
      <aside class="col-right">
        <div class="sticky">
          <section class="card terminal-wrap" aria-labelledby="terminal-title">
            <h2 id="terminal-title">Silent Terminal</h2>

            <div class="terminal" id="terminal" role="log" aria-live="polite">
              <div class="line muted">Welcome to Silent Studio — type <code>help</code> or press <code>`</code> to open quickly.</div>
            </div>

            <div class="terminal-input" style="margin-top:8px">
              <input id="terminalInput" type="text" placeholder="enter command (help, contact, enter, clear, games)" aria-label="Terminal input">
              <button id="runCmd" class="btn">Run</button>
            </div>

            <div class="controls" style="margin-top:8px">
              <button id="downloadLog" class="btn ghost">Download Log</button>
              <button id="toggleNight" class="btn ghost">Nightmare: OFF</button>
              <button id="toggleAudio" class="btn ghost">Ambient: ON</button>
            </div>

            <div class="hint">Tip: stiskni <code>`</code> (backtick) pro otevření terminálu</div>
          </section>

          <section class="card" aria-labelledby="support-title" style="margin-top:12px">
            <h2 id="support-title">Support</h2>
            <p style="margin:0 0 8px">Any support keeps the project alive. We truly appreciate every contribution.</p>
            <div style="display:flex;gap:8px">
              <a id="supportBtn" class="btn" href="https://www.patreon.com/Silent_Studio" target="_blank" rel="noopener">Support Us</a>
              <a class="btn ghost" href="mailto:assist.silent.studio@gmail.com">Email</a>
            </div>
          </section>
        </div>
      </aside>
    </div>

    <footer>
      <p>© 2025 Silent Studio — Built in the dark.</p>
    </footer>
  </div>

  <!-- ===============
       SCRIPTS (modulárně a přehledně)
       =============== -->
  <script>
    /* =========================
       HELPERS & SELECTORS
       ========================= */
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);

    /* =========================
       TERMINAL: log, commands, download
       ========================= */
    const terminal = $('#terminal');
    const input = $('#terminalInput');
    const runBtn = $('#runCmd');
    const downloadBtn = $('#downloadLog');
    const emailCopy = $('#emailCopy');
    const toggleNightBtn = $('#toggleNight');
    const toggleAudioBtn = $('#toggleAudio');
    const supportBtn = $('#supportBtn');
    let logArr = [];

    function appendLine(text, cls){
      const node = document.createElement('div');
      node.className = 'line' + (cls ? ' '+cls : '');
      node.textContent = text;
      terminal.appendChild(node);
      terminal.scrollTop = terminal.scrollHeight;
      logArr.push(text);
    }

    function handleCommand(raw){
      if(!raw || !raw.trim()) return;
      const cmd = raw.trim().toLowerCase();
      appendLine('> ' + raw, 'prompt');

      if(cmd === 'help'){
        appendLine('Available commands: help, contact, enter, clear, games, join, secret');
      } else if (cmd === 'contact'){
        appendLine('Email: assist.silent.studio@gmail.com — click the email button to copy.');
      } else if (cmd === 'games'){
        appendLine('No releases yet. Subscribe to the Discord for incubations.');
      } else if (cmd === 'join'){
        appendLine('Discord widget is embedded on the page.');
      } else if (cmd === 'enter' || cmd === 'secret'){
        appendLine('Access granted. Triggering special mode...');
        triggerNightmareMode(true);
      } else if (cmd === 'clear'){
        terminal.innerHTML = '';
      } else {
        appendLine('Unknown command — type help.');
      }
    }

    runBtn.addEventListener('click', ()=>{
      handleCommand(input.value);
      input.value = '';
      // short beep feedback if audio enabled (handled later)
      quickBeep();
    });
    input.addEventListener('keydown', e=>{
      if(e.key === 'Enter'){ runBtn.click(); }
    });

    downloadBtn.addEventListener('click', ()=>{
      const blob = new Blob([logArr.join('\n')], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'silent-terminal-log.txt'; a.click();
      URL.revokeObjectURL(url);
    });

    emailCopy.addEventListener('click', async ()=>{
      const text = 'assist.silent.studio@gmail.com';
      try{
        await navigator.clipboard.writeText(text);
        appendLine('Email copied to clipboard.');
      }catch(e){
        appendLine('Copy failed — please copy manually: ' + text);
      }
    });

    /* =========================
       NIGHTMARE MODE (visual + audio tweak)
       ========================= */
    let nightmare = false;
    toggleNightBtn.addEventListener('click', ()=> triggerNightmareMode());

    function triggerNightmareMode(forceOn = null){
      if(typeof forceOn === 'boolean') nightmare = !forceOn; // flip inside then set
      nightmare = (forceOn !== null) ? forceOn : !nightmare;
      document.body.classList.toggle('nightmare', nightmare);
      toggleNightBtn.textContent = 'Nightmare: ' + (nightmare ? 'ON' : 'OFF');

      // hero image tonal change
      const heroImg = document.getElementById('heroImg');
      if(nightmare){
        heroImg.style.filter = 'brightness(.34) contrast(1.6) saturate(.6) hue-rotate(8deg)';
        appendLine('Nightmare mode engaged.');
      } else {
        heroImg.style.filter = 'brightness(.56) contrast(1.05)';
        appendLine('Nightmare mode off.');
      }
      // small screen shake
      document.body.animate([{transform:'translateY(0)'},{transform:'translateY(-6px)'},{transform:'translateY(0)'}], {duration:650, easing:'ease-in-out'});
    }

    /* =========================
       AMBIENT AUDIO (lightweight, resumable)
       ========================= */
    let audioCtx = null, masterGain = null, lfo = null, noiseGain = null;
    let ambientOn = true;
    function initAudio(){
      if(audioCtx) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      masterGain = audioCtx.createGain(); masterGain.gain.value = 0.28; masterGain.connect(audioCtx.destination);

      const oscA = audioCtx.createOscillator(); oscA.type = 'sine'; oscA.frequency.value = 52;
      const oscB = audioCtx.createOscillator(); oscB.type = 'sine'; oscB.frequency.value = 97.1;

      const gA = audioCtx.createGain(); gA.gain.value = 0.07;
      const gB = audioCtx.createGain(); gB.gain.value = 0.05;

      lfo = audioCtx.createOscillator(); lfo.frequency.value = 0.045;
      const lfoGain = audioCtx.createGain(); lfoGain.gain.value = 8;

      lfo.connect(lfoGain);
      lfoGain.connect(oscA.frequency);
      lfoGain.connect(oscB.frequency);

      oscA.connect(gA); gA.connect(masterGain);
      oscB.connect(gB); gB.connect(masterGain);

      // very short brown-ish noise
      const bufferSize = 1 * audioCtx.sampleRate;
      const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = noiseBuffer.getChannelData(0);
      let last = 0;
      for(let i=0;i<bufferSize;i++){
        const white = Math.random()*2 -1;
        data[i] = (last + (0.02*white)) / 1.02;
        last = data[i];
        data[i] *= 2.3;
      }
      const noiseNode = audioCtx.createBufferSource();
      noiseNode.buffer = noiseBuffer; noiseNode.loop = true;
      noiseGain = audioCtx.createGain(); noiseGain.gain.value = 0.02;
      noiseNode.connect(noiseGain); noiseGain.connect(masterGain);

      oscA.start(); oscB.start(); lfo.start(); noiseNode.start();
      // gentle fade in
      masterGain.gain.setValueAtTime(0.001, audioCtx.currentTime);
      masterGain.gain.linearRampToValueAtTime(0.28, audioCtx.currentTime + 1.6);
    }

    function toggleAudio(){
      if(!audioCtx) initAudio();
      if(audioCtx.state === 'suspended'){
        audioCtx.resume();
        ambientOn = true;
        toggleAudioBtn.textContent = 'Ambient: ON';
        appendLine('Ambient audio resumed.');
      } else {
        audioCtx.suspend();
        ambientOn = false;
        toggleAudioBtn.textContent = 'Ambient: OFF';
        appendLine('Ambient audio suspended.');
      }
    }
    toggleAudioBtn.addEventListener('click', toggleAudio);

    function quickBeep(volume=0.02, freq=440, dur=0.06){
      if(!audioCtx) return;
      const g = audioCtx.createGain(); g.gain.value = volume; g.connect(audioCtx.destination);
      const o = audioCtx.createOscillator(); o.type = 'square'; o.frequency.value = freq;
      o.connect(g); o.start(); o.stop(audioCtx.currentTime + dur);
      g.gain.setTargetAtTime(0.0001, audioCtx.currentTime + dur*0.6, 0.01);
    }

    /* small beep wrapper safe for pre-audio-init */
    function quickBeepSafe(){ try{ quickBeep(); }catch(e){} }

    /* use quickBeep when interacting with UI */
    function clickFeedback(){ 
      if(!audioCtx) initAudio(); 
      quickBeep(0.02, 660, 0.06);
    }
    // bind click sound to support button
    supportBtn.addEventListener('click', clickFeedback);

    /* =========================
       SPIRAL CANVAS (decoupled, lightweight)
       ========================= */
    // we keep a decorative canvas but minimize perf impact: create on bigger screens only
    (function initSpiral(){
      if(window.matchMedia && window.matchMedia('(max-width:900px)').matches) return;
      const canvas = document.createElement('canvas');
      canvas.className = 'spiral';
      canvas.style.position = 'fixed';
      canvas.style.width = '420px';
      canvas.style.height = '420px';
      canvas.style.left = '50%';
      canvas.style.top = '50%';
      canvas.style.transform = 'translate(-50%,-50%)';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = 0;
      canvas.style.opacity = 0.12;
      document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      function resize(){
        const dpr = devicePixelRatio || 1;
        const w = canvas.width = 420 * dpr;
        const h = canvas.height = 420 * dpr;
        canvas.style.width = '420px'; canvas.style.height = '420px';
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      resize();
      window.addEventListener('resize', resize);
      let t = 0, mx=0;
      window.addEventListener('pointermove', e => { mx = (e.clientX / window.innerWidth - 0.5) * 0.6; });

      function draw(){
        ctx.clearRect(0,0,420,420);
        ctx.save(); ctx.translate(210,210); ctx.rotate(mx);
        ctx.beginPath();
        ctx.strokeStyle = 'rgba(255,255,255,0.09)';
        ctx.lineWidth = 0.9;
        for(let i=0;i<380;i++){
          const a = i*0.12 + t*0.0008;
          const r = 0.9 * i * (0.6 + Math.sin(t/200 + i*0.02)*0.01) + Math.sin(i*0.23+t/40)*6;
          const x = Math.cos(a)*r, y=Math.sin(a)*r;
          if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        }
        ctx.stroke();
        ctx.restore();
        t += 1;
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    })();

    /* =========================
       KEYBIND: backtick opens focus to input
       ========================= */
    window.addEventListener('keydown', (e)=>{
      if(e.key === '`'){ input.focus(); e.preventDefault(); }
      if(e.key === 'Escape'){ input.blur(); }
    });

    /* =========================
       INITIAL LOG MESSAGES
       ========================= */
    appendLine('Silent Studio loaded. Tip: press ` (backtick) to focus terminal.');
    appendLine('Type "help" for commands.');

    /* Small accessibility: ensure focus visible */
    input.addEventListener('focus', ()=> input.style.outline = '2px solid rgba(127,231,255,0.12)');
    input.addEventListener('blur', ()=> input.style.outline = 'none');

    /* Utility: safe quick beep when user interacts */
    function quickBeep(){ if(!audioCtx) initAudio(); quickBeepSafe(); }
  </script>
</body>
</html>
